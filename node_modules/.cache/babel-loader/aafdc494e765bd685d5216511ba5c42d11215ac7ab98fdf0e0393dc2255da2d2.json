{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNode}from\"@craftjs/core\";import ContentEditable from\"react-contenteditable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyTitle(_ref){let{text,userEditable=true,className='',fontSize='20'}=_ref;const[editable,setEditable]=useState(false);const{connectors:{connect,drag},selected,actions:{setProp}}=useNode(state=>({selected:state.events.selected,dragged:state.events.dragged}));useEffect(()=>{if(selected){return;}if(userEditable){setEditable(false);}},[selected]);return/*#__PURE__*/_jsx(_Fragment,{children:userEditable?/*#__PURE__*/_jsx(ContentEditable,{html:text// disabled={!editable}\n,onChange:e=>setProp(props=>props.text=e.target.value.replace(/<\\/?[^>]+(>|$)/g,\"\"),500),tagName:\"p\",style:{fontSize:\"\".concat(fontSize,\"px\")},className:className}):/*#__PURE__*/_jsx(\"h1\",{ref:ref=>connect(drag(ref)),onClick:()=>{alert('Clicked');selected&&userEditable&&setEditable(true);},className:\"display-inline\",children:text})});}const TextSettings=()=>{const{actions:{setProp},fontSize}=useNode(node=>({text:node.data.props.text,fontSize:node.data.props.fontSize}));return/*#__PURE__*/_jsxs(\"label\",{children:[\"Font size\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",defaultValue:fontSize||7,step:7,min:1,max:50,onChange:e=>{setProp(props=>props.fontSize=e.target.value,1000);}})]});};export const TextDefaultProps={text:\"Hi\",fontSize:20};Text.craft={props:TextDefaultProps,related:{settings:TextSettings}};","map":{"version":3,"names":["React","useEffect","useState","useNode","ContentEditable","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MyTitle","_ref","text","userEditable","className","fontSize","editable","setEditable","connectors","connect","drag","selected","actions","setProp","state","events","dragged","children","html","onChange","e","props","target","value","replace","tagName","style","concat","ref","onClick","alert","TextSettings","node","data","type","defaultValue","step","min","max","TextDefaultProps","Text","craft","related","settings"],"sources":["C:/laragon/www/my-irbm/src/components/MyTitle.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNode } from \"@craftjs/core\";\r\nimport ContentEditable from \"react-contenteditable\";\r\n\r\nexport default function MyTitle({text, userEditable = true, className = '' , fontSize ='20' }) {\r\n  \r\n  const [editable, setEditable] = useState(false);\r\n\r\n    const {\r\n        connectors: { connect, drag },\r\n        selected,\r\n        actions: { setProp },\r\n      } = useNode((state) => ({\r\n        selected: state.events.selected,\r\n        dragged: state.events.dragged,\r\n      }));\r\n\r\n      useEffect(() => {\r\n        if (selected) {\r\n          return;\r\n        }\r\n    \r\n        if (userEditable) {\r\n          setEditable(false);\r\n        }\r\n      }, [selected]);\r\n\r\n      \r\n\r\n  return (\r\n    <>\r\n    { userEditable ?  (<ContentEditable\r\n      \r\n      html={text}\r\n      // disabled={!editable}\r\n      onChange={(e) =>\r\n        setProp(\r\n          (props) =>\r\n            (props.text = e.target.value.replace(/<\\/?[^>]+(>|$)/g, \"\")),\r\n          500\r\n        )\r\n      }\r\n      tagName=\"p\"\r\n      style={{ fontSize: `${fontSize}px` }}\r\n      className={className} />) :   <h1  ref={(ref) => connect(drag(ref))} \r\n      onClick={() =>  {\r\n        alert('Clicked');\r\n        selected && userEditable && setEditable(true); }}\r\n      className='display-inline'>{text}</h1> }\r\n      </>\r\n  \r\n  )\r\n}\r\n\r\n\r\n\r\nconst TextSettings = () => {\r\n  const {\r\n    actions: { setProp },\r\n    fontSize,\r\n  } = useNode((node) => ({\r\n    text: node.data.props.text,\r\n    fontSize: node.data.props.fontSize,\r\n  }));\r\n\r\n  return (\r\n    <label>\r\n      Font size\r\n      <input\r\n        type=\"range\"\r\n        defaultValue={fontSize || 7}\r\n        step={7}\r\n        min={1}\r\n        max={50}\r\n        onChange={(e) => {\r\n          setProp((props) => (props.fontSize = e.target.value), 1000);\r\n        }}\r\n      />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport const TextDefaultProps = {\r\n  text: \"Hi\",\r\n  fontSize: 20,\r\n};\r\n\r\nText.craft = {\r\n  props: TextDefaultProps,\r\n  related: {\r\n    settings: TextSettings,\r\n  },\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}